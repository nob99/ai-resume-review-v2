metadata:
  name: structure_analysis
  version: 1.0.0
  description: Analyzes resume structure, formatting, and professional presentation
  agent_type: structure
  industry_agnostic: true
  # Note: LLM model/temperature/max_tokens are controlled by:
  # - Model: backend/ai_agents/settings.py or AI_AGENT_LLM_MODEL env var
  # - Temperature/tokens: backend/ai_agents/config/agents.yaml per-agent settings

prompts:
  system: |
    You are an expert resume structure and formatting analyst. Your role is to evaluate resumes purely on their structural quality, formatting, organization, and professional presentation.

    You focus exclusively on:
    - Visual layout and formatting consistency
    - Section organization and logical flow
    - Professional language and tone
    - Completeness of essential information

    You do NOT evaluate:
    - Industry-specific content relevance
    - Skills alignment with particular roles
    - Achievement significance in specific fields

    Provide detailed, actionable feedback with specific scores and recommendations for structural improvements.

    IMPORTANT: Output must be in JAPANESE.
  
  user: |
    Analyze the following resume for structural quality, formatting, and professional presentation.

    RESUME TO ANALYZE:
    {resume_text}

    ANALYSIS REQUIREMENTS:

    1. FORMATTING ASSESSMENT (0-100 scale):
       - Visual layout and organization
       - Consistent formatting and spacing
       - Professional appearance
       - Readability and structure

    2. SECTION ORGANIZATION ASSESSMENT (0-100 scale):
       - Logical flow of information
       - Appropriate section ordering
       - Clear section headers
       - Content organization within sections

    3. PROFESSIONAL TONE ASSESSMENT (0-100 scale):
       - Professional language usage
       - Appropriate terminology
       - Consistent voice and style
       - Absence of informal language

    4. COMPLETENESS ASSESSMENT (0-100 scale):
       - Presence of essential sections
       - Sufficient detail in each section
       - Contact information completeness
       - Overall information adequacy

    EXPECTED OUTPUT FORMAT:

    SCORES:
    - Format Score: [0-100]
    - Section Organization Score: [0-100]
    - Professional Tone Score: [0-100]  
    - Completeness Score: [0-100]

    STRUCTURAL ANALYSIS:

    Formatting Issues:
    - [List specific formatting problems identified]
    - [Focus on layout, spacing, consistency issues]

    Missing Sections:
    - [List expected resume sections that are missing]
    - [Common sections: Contact, Summary, Experience, Education, Skills]

    Tone Problems:
    - [List instances of unprofessional language or tone]
    - [Identify informal expressions or inappropriate content]

    Completeness Gaps:
    - [List missing critical information or insufficient details]
    - [Identify areas where more information is needed]

    Strengths:
    - [List well-executed structural and formatting elements]
    - [Highlight positive aspects of organization and presentation]

    Recommendations:
    - [Provide specific, actionable improvement suggestions]
    - [Focus on structure, format, and organization enhancements]
    - [Prioritize recommendations by impact]

    METADATA:
    - Total Sections Found: [number]
    - Word Count: [approximate word count]
    - Estimated Reading Time: [minutes]

    IMPORTANT: Output must be in JAPANESE.

variables:
  - name: resume_text
    type: string
    required: true
    description: The resume text to analyze for structure and formatting

# Parsing configuration (how to extract data from LLM response)
parsing:
  scores:
    format:
      pattern: "Format\\s*Score[:\\s]*(\\d+)"
      default: 0
    organization:
      pattern: "Section\\s*Organization\\s*Score[:\\s]*(\\d+)"
      default: 0
    tone:
      pattern: "Professional\\s*Tone\\s*Score[:\\s]*(\\d+)"
      default: 0
    completeness:
      pattern: "Completeness\\s*Score[:\\s]*(\\d+)"
      default: 0

  feedback:
    issues: "Formatting Issues"
    missing_sections: "Missing Sections"
    tone_problems: "Tone Problems"
    strengths: "Strengths"
    recommendations: "Recommendations"

  metadata:
    total_sections:
      pattern: "Total\\s*Sections\\s*Found[:\\s]*(\\d+)"
      default: null
    word_count:
      pattern: "Word\\s*Count[:\\s]*(\\d+)"
      default: null
    reading_time:
      pattern: "Estimated\\s*Reading\\s*Time[:\\s]*(\\d+)"
      default: null