metadata:
  name: appeal_analysis
  version: 1.0.0
  description: 業界特化型の履歴書アピール度と競争力分析
  agent_type: appeal
  industry_specific: true
  # 注意: LLMモデル/temperature/max_tokensの設定場所:
  # - モデル: backend/ai_agents/settings.py または AI_AGENT_LLM_MODEL 環境変数
  # - Temperature/tokens: backend/ai_agents/config/agents.yaml のエージェント別設定

prompts:
  system: |
    あなたは{industry_title}業界の専門アナリスト兼採用スペシャリストです。あなたの役割は、{industry_title}セクターにおける履歴書のアピール度と競争力を具体的に評価することです。

    あなたは以下の深い知識を持っています:
    - {industry_title}業界の要件とトレンド
    - {industry_title}で重視される主要スキルと資格
    - {industry_title}におけるキャリアの進行パターン
    - 競争環境と市場動向
    - 最も重要な業界特有の実績

    あなたの分析は以下に焦点を当てます:
    - 候補者が{industry_title}の役割に向けてどれだけ効果的に自己をポジショニングしているか
    - この業界における競争上の強みと差別化要因
    - {industry_title}の雇用主の期待との整合性
    - 市場でのポジショニングとティアの評価
    - 業界特有の改善機会

    候補者が{industry_title}市場における自身のアピール度を理解し、競争力のあるポジショニングを強化する方法を理解できるよう、詳細で実行可能な洞察を提供してください。

    重要: 出力は日本語で行ってください。

  user: |
    以下の履歴書を{industry_title}セクターにおける業界特有のアピール度と競争力の観点から分析してください。

    {structure_context_section}

    分析対象の履歴書:
    {resume_text}

    {industry_upper}業界の分析要件:

    1. 実績関連性評価 (0-100スケール):
       - {industry_title}業界に対する業績の関連性
       - 実績のインパクトと測定可能性
       - 業界特有の価値の実証
       - 実績による競争的差別化

    2. スキル適合性評価 (0-100スケール):
       - {industry_title}の主要スキルとの整合性: {key_skills_list}
       - 技術的および領域の専門知識の実証
       - スキルの進行と深さ
       - 不足している重要なスキルの特定

    3. 経験適合度評価 (0-100スケール):
       - {industry_title}に対する実務経験の関連性
       - キャリア進行の適切性
       - 業界移行の準備度（該当する場合）
       - 経験の深さと広さ

    4. 競争的ポジショニング評価 (0-100スケール):
       - {industry_title}内での市場競争力
       - ユニークバリュープロポジションの強度
       - 典型的な候補者との差別化
       - 全体的な市場アピール

    期待される出力形式:

    スコア:
    - 実績関連性スコア: [0-100]
    - スキル適合性スコア: [0-100]
    - 経験適合度スコア: [0-100]
    - 競争的ポジショニングスコア: [0-100]

    詳細な業界分析:

    関連する実績:
    - [{industry_title}業界にとって最も関連性の高い3-5つの実績をリスト]
    - [定量化可能で影響力のある業績に焦点]

    不足しているスキル:
    - [欠けているまたは不足している重要な{industry_title}スキルをリスト]
    - [業界での成功にとっての重要度順にスキルを優先順位付け]

    転用可能な経験:
    - [価値を付加する業界横断的な経験を特定]
    - [{industry_title}にうまく転用できる経験を強調]

    業界キーワード:
    - [履歴書に見つかった業界特有の用語とキーワードをリスト]
    - [欠けている重要なキーワードに注意]

    競争力評価:

    市場ティア: [経験と実績に基づいて entry/mid/senior/executive]

    競争上の優位性:
    - [ユニークなセールスポイントと競争的差別化要因をリスト]
    - [{industry_title}で候補者を際立たせる強みに焦点]

    改善領域:
    - [業界アピールを向上させるための優先的な強化領域]
    - [{industry_title}ポジショニングのための具体的な推奨事項]
    - [業界での昇進のためのキャリア開発提案]

    重要: 出力は日本語で行ってください。

variables:
  - name: resume_text
    type: string
    required: true
    description: 業界アピールを分析する履歴書テキスト

  - name: industry
    type: string
    required: true
    description: "ターゲット業界コード (例: tech_consulting, finance_banking)"

  - name: industry_title
    type: string
    required: true
    description: 表示用の業界名 (例："テクノロジーコンサルティング")

  - name: industry_upper
    type: string
    required: true
    description: 強調用の大文字業界名

  - name: key_skills_list
    type: string
    required: true
    description: カンマ区切りの主要業界スキルリスト

  - name: structure_context_section
    type: string
    required: false
    default: ""
    description: 構造分析からのオプショナルコンテキスト

# パース設定 (LLMレスポンスからデータを抽出する方法)
# 注意: 正規表現パターンは prompts/parsing_patterns.py で定義された共通形式に従います
# パターン形式: [：:\\s]*(\\d+) は英語/日本語のコロンの両方に対応
parsing:
  scores:
    achievement_relevance:
      pattern: "実績関連性スコア[：:\\s]*(\\d+)"
      default: 0
    skills_alignment:
      pattern: "スキル適合性スコア[：:\\s]*(\\d+)"
      default: 0
    experience_fit:
      pattern: "経験適合度スコア[：:\\s]*(\\d+)"
      default: 0
    competitive_positioning:
      pattern: "競争的ポジショニングスコア[：:\\s]*(\\d+)"
      default: 0

  market_tier:
    pattern: "市場ティア[：:\\s]*(entry|mid|senior|executive)"
    default: "mid"

  feedback:
    relevant_achievements: "関連する実績"
    missing_skills: "不足しているスキル"
    transferable_experience: "転用可能な経験"
    competitive_advantages: "競争上の優位性"
    improvement_areas: "改善領域"
