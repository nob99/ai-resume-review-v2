metadata:
  name: structure_analysis
  version: 1.0.0
  description: 履歴書の構造、フォーマット、プロフェッショナルなプレゼンテーションを分析
  agent_type: structure
  industry_agnostic: true
  # 注意: LLMモデル/temperature/max_tokensの設定場所:
  # - モデル: backend/ai_agents/settings.py または AI_AGENT_LLM_MODEL 環境変数
  # - Temperature/tokens: backend/ai_agents/config/agents.yaml のエージェント別設定

prompts:
  system: |
    あなたは履歴書の構造とフォーマット分析の専門家です。あなたの役割は、履歴書を構造の質、フォーマット、整理、プロフェッショナルなプレゼンテーションの観点から純粋に評価することです。

    あなたが重点を置くのは以下のみです:
    - ビジュアルレイアウトとフォーマットの一貫性
    - セクションの整理と論理的な流れ
    - プロフェッショナルな言葉遣いとトーン
    - 必須情報の完全性

    あなたが評価しないもの:
    - 業界特有のコンテンツの関連性
    - 特定の役割とのスキルの整合性
    - 特定の分野における実績の重要性

    構造的な改善について、詳細で実行可能なフィードバックと具体的なスコア、推奨事項を提供してください。

    重要: 出力は日本語で行ってください。

  user: |
    以下の履歴書を構造の質、フォーマット、プロフェッショナルなプレゼンテーションの観点から分析してください。

    分析対象の履歴書:
    {resume_text}

    分析要件:

    1. フォーマット評価 (0-100スケール):
       - ビジュアルレイアウトと整理
       - 一貫したフォーマットとスペーシング
       - プロフェッショナルな外観
       - 読みやすさと構造

    2. セクション構成評価 (0-100スケール):
       - 情報の論理的な流れ
       - 適切なセクションの順序
       - 明確なセクション見出し
       - セクション内のコンテンツ整理

    3. プロフェッショナルトーン評価 (0-100スケール):
       - プロフェッショナルな言葉の使用
       - 適切な専門用語
       - 一貫した声とスタイル
       - カジュアルな言葉の不在

    4. 完全性評価 (0-100スケール):
       - 必須セクションの存在
       - 各セクションの十分な詳細
       - 連絡先情報の完全性
       - 全体的な情報の十分性

    期待される出力形式:

    スコア:
    - フォーマットスコア: [0-100]
    - セクション構成スコア: [0-100]
    - プロフェッショナルトーンスコア: [0-100]
    - 完全性スコア: [0-100]

    構造分析:

    フォーマット上の問題:
    - [特定されたフォーマットの問題をリスト]
    - [レイアウト、スペーシング、一貫性の問題に焦点]

    欠けているセクション:
    - [欠けている想定される履歴書セクションをリスト]
    - [一般的なセクション: 連絡先、要約、経験、学歴、スキル]

    トーンの問題:
    - [プロフェッショナルでない言葉やトーンの例をリスト]
    - [カジュアルな表現や不適切なコンテンツを特定]

    完全性のギャップ:
    - [欠けている重要な情報や不十分な詳細をリスト]
    - [より多くの情報が必要な領域を特定]

    強み:
    - [よく実行された構造とフォーマットの要素をリスト]
    - [整理とプレゼンテーションの肯定的な側面を強調]

    推奨事項:
    - [具体的で実行可能な改善提案を提供]
    - [構造、フォーマット、整理の強化に焦点]
    - [影響度順に推奨事項を優先順位付け]

    メタデータ:
    - 見つかったセクション総数: [数値]
    - 単語数: [おおよその単語数]
    - 推定読了時間: [分]

    重要: 出力は日本語で行ってください。

variables:
  - name: resume_text
    type: string
    required: true
    description: 構造とフォーマットを分析する履歴書テキスト

# パース設定 (LLMレスポンスからデータを抽出する方法)
# 注意: 正規表現パターンは prompts/parsing_patterns.py で定義された共通形式に従います
# パターン形式: [：:\\s]*(\\d+) は英語/日本語のコロンの両方に対応
parsing:
  scores:
    format:
      pattern: "フォーマットスコア[：:\\s]*(\\d+)"
      default: 0
    organization:
      pattern: "セクション構成スコア[：:\\s]*(\\d+)"
      default: 0
    tone:
      pattern: "プロフェッショナルトーンスコア[：:\\s]*(\\d+)"
      default: 0
    completeness:
      pattern: "完全性スコア[：:\\s]*(\\d+)"
      default: 0

  feedback:
    issues: "フォーマット上の問題"
    missing_sections: "欠けているセクション"
    tone_problems: "トーンの問題"
    strengths: "強み"
    recommendations: "推奨事項"

  metadata:
    total_sections:
      pattern: "見つかったセクション総数[：:\\s]*(\\d+)"
      default: null
    word_count:
      pattern: "単語数[：:\\s]*(\\d+)"
      default: null
    reading_time:
      pattern: "推定読了時間[：:\\s]*(\\d+)"
      default: null
